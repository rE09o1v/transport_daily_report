# Transport Daily Report - Flutter運送業日報システム

## プロジェクト概要

運送業向けの業務記録管理システム。GPS位置情報と連携した訪問記録、点呼記録、走行距離管理、PDF出力機能を提供する本格的なビジネスアプリケーション。

**技術スタック**: Flutter 3.29.3, Dart 3.7.2
**対象プラットフォーム**: Android, iOS, Web, Windows, macOS, Linux
**業界**: 運送業・物流業
**言語**: 日本語（完全ローカライズ済み）

## 機能一覧

### 主要機能（4つのタブ構成）

1. **📋 訪問記録管理**
   - 顧客訪問の時刻・場所・メモ記録
   - GPS位置情報自動取得
   - 日別表示・検索機能

2. **🏢 得意先管理**
   - 顧客情報（名前・住所・電話・GPS座標）
   - 位置ベース検索（300m範囲）
   - 顧客データCRUD操作

3. **📊 点呼記録**
   - 始業・終業点呼記録
   - アルコール検知器測定値記録（法定要件）
   - 点呼執行者情報管理

4. **📈 履歴・レポート**
   - 過去データ閲覧
   - PDF出力（点呼シート・日報）
   - データエクスポート機能

### 技術的特徴

- **マルチプラットフォーム対応**: Web/ネイティブ分岐実装
- **オフライン対応**: ローカルストレージベース
- **位置情報サービス**: 高精度GPS取得
- **法的要件準拠**: 運送業法に基づく記録管理

## アーキテクチャ

### ディレクトリ構造
```
lib/
├── models/          # データモデル（Client, VisitRecord, RollCallRecord, DailyRecord）
├── screens/         # UI画面（9画面）
├── services/        # ビジネスロジック（Storage, Location, PDF）
└── utils/          # プラットフォーム抽象化
```

### データ永続化
- **プライマリ**: SharedPreferences + JSONファイル
- **Web対応**: SharedPreferencesフォールバック
- **同期**: Completer-based非同期処理

## 開発環境・ツール

### 必須環境
- Flutter 3.29.3以上
- Dart 3.7.2以上
- Android/iOS開発環境

### パッケージ依存関係
```yaml
# 位置情報
geolocator: ^14.0.0
permission_handler: ^12.0.0+1

# ストレージ
shared_preferences: ^2.2.2
path_provider: ^2.1.5

# PDF/共有
pdf: ^3.11.3
share_plus: ^11.0.0

# 国際化
flutter_localizations: (SDK)
intl: ^0.19.0
```

## 品質管理

### 既知の課題
- **flutter analyze**: 122件のlint問題
  - 主要: print文（本番用ロギング未実装）
  - 非同期BuildContext使用警告
  - 未使用変数・インポート
- **flutter test**: デフォルトテストが実際のアプリと不整合

### 改善優先度
1. **高**: 本番用ロギングシステム実装
2. **中**: 非同期UI状態管理改善
3. **低**: 未使用コード除去

## 開発ワークフロー

### 推奨コマンド
```bash
# 開発開始
flutter pub get
flutter analyze  # 問題確認
flutter run -d chrome  # Web開発

# 品質チェック
flutter analyze
flutter test

# ビルド
flutter build apk
flutter build web
```

### Git管理
- **メインブランチ**: main
- **最近のコミット**: PDF機能・UI改善中心
- **開発方針**: 機能単位での小さなコミット

## ビジネス要件

### 運送業法対応
- 点呼記録の詳細管理
- アルコール検知値の法定記録
- 走行前後の点検記録

### ユーザビリティ
- 直感的な日本語UI
- ワンタップ記録登録
- オフライン環境対応

## 今後の開発方針

### 短期目標
1. コード品質改善（lint警告解決）
2. テスト環境整備
3. エラーハンドリング強化

### 長期目標
1. クラウド同期機能
2. 帳票テンプレート拡張
3. 多言語対応（韓国語・英語）

---
**更新日**: 2025-01-11
**開発者メモ**: 実用性重視の業務アプリ。GPS・PDF機能が核心価値。